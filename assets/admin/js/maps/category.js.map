{"version":3,"sources":["category.js"],"names":["$","hulla","hullabaloo","formData","rows","find","text","formAddCategory","populateTable","pg","rw","ajax","url","baseurl","type","dataType","data","page","beforeSend","html","success","fail","jqXHR","textStatus","errorThrown","console","log","on","this","value","prop","subcat","each","i","append","name","attr","catid","remove","val","document","e","preventDefault","FormData","x","serializeArray","field","processData","contentType","response","auth","send","message","trigger","addCategory","btnActions","pagination","reload","event","action","call"],"mappings":"AAAAA,EAAE,WAID,IAAIC,EAAQ,IAAIC,WAGZC,EAAW,KACXC,EAAOJ,EAAE,aAAaK,KAAK,aAAaC,OACxCC,EAAkBP,EAAE,oBAwBpBQ,EAAgB,SAAUC,EAAIC,GACXV,EAAE,sBACxBA,EAAEW,KAAK,CACNC,IAAKC,QAAU,gCACfC,KAAM,MACNC,SAAU,OACVC,KAAM,CACOC,KAAKR,EACLL,KAAKM,GAETQ,WAAY,WACpBlB,EAAE,sBAAsBmB,KAtCJ,gKAwCrBC,QAAS,SAAUJ,GAClBhB,EAAE,sBAAsBmB,KAAK,IAC7BnB,EAAE,sBAAsBmB,KAAKH,IAE9BK,KAAM,SAAUC,EAAOC,EAAYC,GAClCC,QAAQC,IAAIF,OA0CZhB,EAAc,EAAGJ,GAEpBJ,EAAE,aAAa2B,GAAG,SAAU,WAC3BnB,EAAc,EAAGoB,KAAKC,SAIvB7B,EAAE,iBAAiB2B,GAAG,SAAU,WACb,GAAdC,KAAKC,OACR7B,EAAE,cAAc8B,KAAK,YAAY,GAxFlC9B,EAAEW,KAAK,CACNC,IAAKC,QAAU,iCACfC,KAAM,MACNC,SAAU,OACVC,KAAM,CACLe,QAAQ,GAETX,QAAS,SAAUJ,GAClBhB,EAAEgC,KAAKhB,EAAM,SAAUiB,EAAGJ,GACzB7B,EAAE,cAAckC,OAAOlC,EAAE,YAAYM,KAAKuB,EAAMM,MAAMC,KAAK,QAASP,EAAMQ,WAG5EhB,KAAM,SAAUC,EAAOC,EAAYC,GAClCC,QAAQC,IAAIF,QA8EbxB,EAAE,cAAc8B,KAAK,WAAY,YACjC9B,EAAE,qBAAqBsC,SACvBtC,EAAE,eAAeuC,IAAI,MAMvBvC,EAAE,cAAc2B,GAAG,SAAU,WAC5B3B,EAAE,eAAeuC,IAAIX,KAAKC,SAI3B7B,EAAEwC,UAAUb,GAAG,QAAS,UAAW,SAAUc,GAC5CA,EAAEC,iBA9De,WACjBvC,EAAW,IAAIwC,SACf,IAAIC,EAAIrC,EAAgBsC,iBAClB7C,EAAEgC,KAAKY,EAAG,SAASX,EAAGa,GAClB3C,EAAS+B,OAAOY,EAAMX,KAAMW,EAAMjB,SAE5C7B,EAAEW,KAAK,CACNC,IAAKL,EAAgB6B,KAAK,UAC1BtB,KAAMP,EAAgB6B,KAAK,UAC3BrB,SAAU,OACVC,KAAMb,EACN4C,aAAa,EACbC,aAAa,EACJ9B,WAAY,WACpBlB,EAAE,WAAWmB,KAlEF,wHAoEZC,QAAS,SAAU6B,GAClBjD,EAAE,WAAWmB,KAAK,IAAIb,KAAK,UACvB2C,EAASC,MACZjD,EAAMkD,KAAKF,EAASG,QAAS,WAC7B5C,EAAc,EAAGJ,GACjBG,EAAgB8C,QAAQ,SACxBlD,EAAW,MAGXF,EAAMkD,KAAKF,EAASG,QAAS,WAG/B/B,KAAM,SAAUC,EAAOC,EAAYC,GAClCC,QAAQC,IAAIF,MAkCd8B,KAGD,IAAIC,EAAa,CAChBC,WAAY,SAAUf,GACrBA,EAAEC,iBACF,IAAIzB,EAAOjB,EAAE4B,MAAMZ,KAAK,sBACxBR,EAAcS,EAAM,KAErBwC,OAAQ,SAAUhB,GACjBA,EAAEC,iBAEFlC,EAAc,EAAG,MAInBR,EAAEwC,UAAUb,GAAG,QAAS,iBAAkB,SAAU+B,GACnD,IACIC,EADO3D,EAAE4B,MACKZ,KAAK,UAEW,mBAAvBuC,EAAWI,IACrBJ,EAAWI,GAAQC,KAAKhC,KAAM8B","file":"../category.js","sourcesContent":["$(function () {\r\n\r\n\t/* Varibales */\r\n\r\n\tvar hulla = new hullabaloo();\r\n\tvar spinner = '<i class=\"fa fa-spinner fa-spin fa-lg fa-fw d-block mx-auto text-white\"></i><span class=\"sr-only\">Loading...</span>';\r\n\tvar bootstrapSpinner = '<div class=\"d-flex justify-content-center mt-2\"> <div class=\"spinner-border text-primary\" role=\"status\"><span class=\"sr-only\">Loading...</span></div></div>';\r\n\tvar formData = null;\r\n\tvar rows = $('#rowCount').find(\":selected\").text();\r\n\tvar formAddCategory = $('#formAddCategory');\r\n\r\n\t// Populating the customers grid \r\n\tvar populateParentCategory = function () {\r\n\r\n\t\t$.ajax({\r\n\t\t\turl: baseurl + 'admin/category/populate-parent',\r\n\t\t\ttype: 'GET',\r\n\t\t\tdataType: 'JSON',\r\n\t\t\tdata: {\r\n\t\t\t\tsubcat: true\r\n\t\t\t},\r\n\t\t\tsuccess: function (data) {\r\n\t\t\t\t$.each(data, function (i, value) {\r\n\t\t\t\t\t$('#pCategory').append($('<option>').text(value.name).attr('value', value.catid));\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\tfail: function (jqXHR, textStatus, errorThrown) {\r\n\t\t\t\tconsole.log(errorThrown);\r\n\t\t\t}\r\n\t\t});\r\n\t};\r\n\r\n\t//\r\n\tvar populateTable = function (pg, rw) {\r\n        var dataTable = $('#dataTableCategory');\r\n\t\t$.ajax({\r\n\t\t\turl: baseurl + 'admin/category/populate-table',\r\n\t\t\ttype: 'GET',\r\n\t\t\tdataType: 'html',\r\n\t\t\tdata: {\r\n                page:pg,\r\n                rows:rw\r\n            },\r\n            beforeSend: function () {\r\n\t\t\t\t$('#dataTableCategory').html(bootstrapSpinner);\r\n\t\t\t},\r\n\t\t\tsuccess: function (data) {\r\n\t\t\t\t$('#dataTableCategory').html('');\r\n\t\t\t\t$('#dataTableCategory').html(data);\r\n\t\t\t},\r\n\t\t\tfail: function (jqXHR, textStatus, errorThrown) {\r\n\t\t\t\tconsole.log(errorThrown);\r\n\t\t\t}\r\n\t\t});\r\n\t};\r\n\r\n\t//\r\n\tvar addCategory = function () {\r\n\t\tformData = new FormData();\r\n\t\tvar x = formAddCategory.serializeArray();\r\n        $.each(x, function(i, field){\r\n            formData.append(field.name, field.value);\r\n\t\t});\r\n\t\t$.ajax({\r\n\t\t\turl: formAddCategory.attr(\"action\"),\r\n\t\t\ttype: formAddCategory.attr(\"method\"),\r\n\t\t\tdataType: 'JSON',\r\n\t\t\tdata: formData,\r\n\t\t\tprocessData: false,\r\n\t\t\tcontentType: false,\r\n            beforeSend: function () {\r\n\t\t\t\t$('#addCat').html(spinner);\r\n\t\t\t},\r\n\t\t\tsuccess: function (response) {\r\n\t\t\t\t$('#addCat').html('').text('Submit');\r\n\t\t\t\tif (response.auth) {\r\n\t\t\t\t\thulla.send(response.message, 'success');\r\n\t\t\t\t\tpopulateTable(1, rows);\r\n\t\t\t\t\tformAddCategory.trigger('reset');\r\n\t\t\t\t\tformData = null;\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\t\t\t\t\thulla.send(response.message, 'danger');\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tfail: function (jqXHR, textStatus, errorThrown) {\r\n\t\t\t\tconsole.log(errorThrown);\r\n\t\t\t}\r\n\t\t});\r\n\t};\r\n\r\n\t/* Binding functions to event handlers */\r\n\r\n    populateTable(1, rows);\r\n\r\n\t$('#rowCount').on('change', function () {\r\n\t\tpopulateTable(1, this.value);\r\n\t});\r\n\r\n\t// Category type on change\r\n\t$('#categoryType').on('change', function () {\r\n\t\tif (this.value == 1) {\r\n\t\t\t$('#pCategory').prop('disabled', false);\r\n\t\t\tpopulateParentCategory();\r\n\t\t} else {\r\n\t\t\t$('#pCategory').prop('disabled', 'disabled');\r\n\t\t\t$('#pCategory option').remove();\r\n\t\t\t$('#categoryId').val(0);\r\n\t\t}\r\n\r\n\t});\r\n\r\n\t// Parent Category\r\n\t$('#pCategory').on('change', function () {\r\n\t\t$('#categoryId').val(this.value);\r\n\t});\r\n\r\n\t\r\n\t$(document).on(\"click\", '#addCat', function (e) {\r\n\t\te.preventDefault();\r\n\t\taddCategory();\r\n\t});\r\n\r\n\tvar btnActions = {\r\n\t\tpagination: function (e) {\r\n\t\t\te.preventDefault();\r\n\t\t\tvar page = $(this).data(\"ci-pagination-page\");\r\n\t\t\tpopulateTable(page, 10);\r\n\t\t},\r\n\t\treload: function (e) {\r\n\t\t\te.preventDefault();\r\n\t\t\t\r\n\t\t\tpopulateTable(1, 10);\r\n\t\t}\r\n\t};\r\n\r\n\t$(document).on(\"click\", 'a[data-action]', function (event) {\r\n\t\tvar link = $(this);\r\n\t\tvar action = link.data(\"action\");\r\n\r\n\t\tif (typeof btnActions[action] === \"function\") {\r\n\t\t\tbtnActions[action].call(this, event);\r\n\t\t}\r\n\t});\r\n\r\n});\r\n"]}