{"version":3,"sources":["main.js"],"names":["$","message","Array","messageBox","adminLogin","rows","find","text","formRComment","fetchAllAds","msg","type","baseurl","pg","rw","ajax","url","dataType","data","page","sort","val","beforeSend","html","success","fail","jqXHR","textStatus","errorThrown","console","log","uri","window","location","pathname","split","on","event","preventDefault","formData","FormData","this","attr","processData","contentType","response","auth","href","value","btnActions","pagination","e","reload","prop","defaultSelected","document","action","call","x","serializeArray","each","i","field","append","name","rejectAdComment","id","close","addClass","alert"],"mappings":"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","file":"../main.js","sourcesContent":["$(function () {\r\n\tvar message = new Array();\r\n\tvar messageBox = $('#messageBox');\r\n    var adminLogin = $('#adminLogin');\r\n    var spinner = '<i class=\"fa fa-spinner fa-spin fa-lg fa-fw d-block mx-auto text-primary mt-3\"></i><span class=\"sr-only\">Loading...</span>';\r\n    var rows = $('#rowCount').find(\":selected\").text();\r\n    var formRComment = $('#formAdReject');\r\n\r\n\t// JS Message\r\n\tvar message = function (msg, type) {\r\n\t\tvar box;\r\n\t\tswitch (type) {\r\n\t\t\tcase 'error':\r\n\t\t\t\treturn box = '<div class=\"notify-box\">' +\r\n\t\t\t\t\t'<noscript>Sorry, your browser does not support JavaScript!</noscript>' +\r\n\t\t\t\t\t'<div class=\"error d-flex align-items-center\">' +\r\n\t\t\t\t\t'<img src=\"' + baseurl + 'assets/images/error.png\" alt=\"Error-Image\" class=\"img-fluid\">' +\r\n\t\t\t\t\t'<div>' + msg + '<div>' +\r\n\t\t\t\t\t'</div>' +\r\n\t\t\t\t\t'</div>';\r\n\t\t\tcase 'success':\r\n\t\t\t\treturn box = '<div class=\"notify-box\">' +\r\n\t\t\t\t\t'<noscript>Sorry, your browser does not support JavaScript!</noscript>' +\r\n\t\t\t\t\t'<div class=\"success d-flex align-items-center\">' +\r\n\t\t\t\t\t'<img src=\"' + baseurl + 'assets/images/success.png\" alt=\"Success-Image\" class=\"img-fluid\">' +\r\n\t\t\t\t\t'<p>' + msg + '</p>' +\r\n\t\t\t\t\t'</div>' +\r\n\t\t\t\t\t'</div>';\r\n\t\t\tcase 'info':\r\n\t\t\t\treturn box = '<div class=\"notify-box\">' +\r\n\t\t\t\t\t'<noscript>Sorry, your browser does not support JavaScript!</noscript>' +\r\n\t\t\t\t\t'<div class=\"info d-flex align-items-center\">' +\r\n\t\t\t\t\t'<img src=\"' + baseurl + 'assets/images/info.png\" alt=\"Success-Image\" class=\"img-fluid\">' +\r\n\t\t\t\t\t'<p>' + msg + '</p>' +\r\n\t\t\t\t\t'</div>' +\r\n\t\t\t\t\t'</div>';\r\n\r\n\r\n\t\t\tdefault:\r\n\t\t\t\treturn 'Unable to display Message';\r\n\t\t}\r\n\t}\r\n\r\n    // Executing functions according to url\r\n\tvar urlBasedAction = function () {\r\n\t\treturn window.location.pathname.split('/');\r\n    };\r\n    \r\n\t// User Login\r\n\tvar login = function (fm) {\r\n\r\n\t\tformData = new FormData(fm);\r\n\r\n\t\t$.ajax({\r\n\t\t\turl: adminLogin.attr(\"action\"),\r\n\t\t\ttype: adminLogin.attr(\"method\"),\r\n\t\t\tdataType: 'JSON',\r\n\t\t\tdata: formData,\r\n\t\t\tprocessData: false,\r\n\t\t\tcontentType: false,\r\n\t\t\tbeforeSend: function () {\r\n\t\t\t\tmessageBox.html(message('Processing...', 'info'));\r\n\t\t\t},\r\n\t\t\tsuccess: function (response) {\r\n\t\t\t\tif (response.auth) {\r\n\t\t\t\t\tmessageBox.html(message(response.message, 'success'));\r\n\t\t\t\t\tlocation.href = response.url;\r\n\t\t\t\t} else {\r\n\t\t\t\t\t//$('input[name=csrf_test_name]').val(response.csrf);\r\n\t\t\t\t\tmessageBox.html(message(response.message, 'error'));\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tfail: function () {\r\n\t\t\t\tconsole.log('Error');\r\n\t\t\t}\r\n\t\t});\r\n\t};\r\n\r\n    //\r\n\tvar fetchAllAds = function (pg, rw) {\r\n        $.ajax({\r\n\t\t\turl: baseurl + 'admin/dashboard/ads/fetch-all',\r\n\t\t\ttype: 'GET',\r\n            dataType: 'html',\r\n            data: {\r\n                page:pg,\r\n                rows:rw,\r\n                sort:$('#sortAds').find(\":selected\").val()\r\n            },\r\n\t\t\tbeforeSend: function () {\r\n\t\t\t\t$('#allData').html(spinner);\r\n\t\t\t},\r\n\t\t\tsuccess: function (data) {\r\n\t\t\t\t$('#allData').html('');\r\n\t\t\t\t$('#allData').html(data);\r\n\t\t\t},\r\n\t\t\tfail: function (jqXHR, textStatus, errorThrown) {\r\n\t\t\t\tconsole.log(errorThrown);\r\n\t\t\t}\r\n\t\t});\r\n    };\r\n    \r\n    //\r\n    var rejectAdComment = function () {\r\n        formData = new FormData();\r\n\r\n        var x = formRComment.serializeArray();\r\n        $.each(x, function(i, field){\r\n            formData.append(field.name, field.value);\r\n        });\r\n\r\n        $.ajax({\r\n\t\t\turl: formRComment.attr(\"action\"),\r\n\t\t\ttype: formRComment.attr(\"method\"),\r\n            dataType: 'JSON',\r\n            data: formData,\r\n\t\t\tprocessData: false,\r\n\t\t\tcontentType: false,\r\n\t\t\tbeforeSend: function () {\r\n\t\t\t\tmessageBox.html(message('Processing...', 'info'));\r\n\t\t\t},\r\n\t\t\tsuccess: function (response) {\r\n\t\t\t\tif (response.auth) {\r\n\t\t\t\t\tmessageBox.html(message(response.message, 'success'));\r\n\t\t\t\t\t//location.href = response.url;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tmessageBox.html(message(response.message, 'error'));\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tfail: function (jqXHR, textStatus, errorThrown) {\r\n\t\t\t\tconsole.log(errorThrown);\r\n\t\t\t}\r\n\t\t});\r\n    };\r\n\r\n    // Approve Specific Ad\r\n    var approveAd = function (id) {\r\n        $.ajax({\r\n\t\t\turl: baseurl + 'admin/dashboard/ads/approve',\r\n\t\t\ttype: 'GET',\r\n            dataType: 'JSON',\r\n            data: { id: id },\r\n\t\t\tbeforeSend: function () {\r\n\t\t\t\t$('#approveBtn').html('Processing...');\r\n\t\t\t},\r\n\t\t\tsuccess: function (response) {\r\n                if (response.auth) {\r\n                    $('#approveBtn').html('');\r\n                    $('#approveBtn').html(response.message);\r\n\t\t\t\t\twindow.close();\r\n\t\t\t\t} else {\r\n                    $('#approveBtn').html(response.message);\r\n                    $('#approveBtn').addClass('btn-danger');\r\n                    alert(response.message);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tfail: function (jqXHR, textStatus, errorThrown) {\r\n\t\t\t\tconsole.log(errorThrown);\r\n\t\t\t}\r\n\t\t});\r\n    };\r\n\r\n    /* Binding */\r\n    var uri = urlBasedAction();\r\n\r\n\t/** */\r\n\tadminLogin.on(\"submit\", function (event) {\r\n\t\tevent.preventDefault();\r\n\t\tlogin(this);\r\n    });\r\n\r\n    // Load Ad Data\r\n\tif (uri[2] == 'ads' && uri[3] == 'all') {\r\n        fetchAllAds(1, rows);\r\n        \r\n        $('#rowCount').on('change', function () {\r\n            fetchAllAds(1, this.value);\r\n        });\r\n\r\n        $('#sortAds').on('change', function () {\r\n            fetchAllAds(1, rows);\r\n            $('#currentPage').text($('#sortAds').find(\":selected\").text());\r\n        });\r\n\r\n        var btnActions = {\r\n            pagination: function (e) {\r\n                e.preventDefault();\r\n                var page = $(this).data(\"ci-pagination-page\");\r\n                fetchAllAds(page, $(this).data(\"rows\"));\r\n            },\r\n            reload: function (e) {\r\n                e.preventDefault();\r\n                $('#rowCount option').prop('selected', function() {\r\n                    return this.defaultSelected;\r\n                });\r\n                fetchAllAds(1, rows);\r\n            }\r\n        };\r\n    \r\n        $(document).on(\"click\", 'a[data-action]', function (event) {\r\n            var link = $(this);\r\n            var action = link.data(\"action\");\r\n    \r\n            if (typeof btnActions[action] === \"function\") {\r\n                btnActions[action].call(this, event);\r\n            }\r\n        });\r\n\t}\r\n    \r\n    if(uri[2] == 'ads' && uri[3] == 'view' && uri[4] != '') {\r\n        $('.modal').on(\"click\", '#rComment', function (event) {\r\n            event.preventDefault();\r\n            rejectAdComment();\r\n        });\r\n\r\n        $(document).on(\"click\", '#approveBtn', function (event) {\r\n            event.preventDefault();\r\n            approveAd($('#approveBtn').data('id'));\r\n        });\r\n       \r\n    }\r\n    \r\n    \r\n});\r\n"]}