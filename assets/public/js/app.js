$(function(){var t=null,e=new Array,o=$("#messageBox"),s=$("#formLogin"),n=$("#formRegister"),r=$("input[name=usermail]"),i=($("#spinner"),'<i class="fa fa-spinner fa-spin fa-lg fa-fw d-block mx-auto text-primary mt-3"></i><span class="sr-only">Loading...</span>');$(".navbar-toggler").click(function(){$(".navbar-collapse").toggleClass("right"),$(".navbar-toggler").toggleClass("indexcity")});e=function(a,t){switch(t){case"error":return'<div class="notify-box"><noscript>Sorry, your browser does not support JavaScript!</noscript><div class="error d-flex align-items-center"><img src="'+baseurl+'assets/images/error.png" alt="Error-Image" class="img-fluid"><div>'+a+"<div></div></div>";case"success":return'<div class="notify-box"><noscript>Sorry, your browser does not support JavaScript!</noscript><div class="success d-flex align-items-center"><img src="'+baseurl+'assets/images/success.png" alt="Success-Image" class="img-fluid"><p>'+a+"</p></div></div>";case"info":return'<div class="notify-box"><noscript>Sorry, your browser does not support JavaScript!</noscript><div class="info d-flex align-items-center"><img src="'+baseurl+'assets/images/info.png" alt="Success-Image" class="img-fluid"><p>'+a+"</p></div></div>";default:return"Unable to display Message"}};r.on("keyup",function(){var a,t,e,o=r.val();12<o.length&&(a=o,t=$("#emailExist"),e=$("#emailExist"),$.ajax({url:baseurl+"public/user/register/check-email",type:n.attr("method"),dataType:"JSON",data:{mail:a},success:function(a){if(a.auth)return r.css("border-color","#ced4da"),t.html(""),e.prop("disabled",!1).css("cursor","pointer"),!0;r.css("border-color","red"),t.html(a.message),e.prop("disabled",!0).css("cursor","not-allowed")},fail:function(){console.log("Error")}}))}),n.on("submit",function(a){a.preventDefault(),t=new FormData(this),$.ajax({url:n.attr("action"),type:n.attr("method"),dataType:"JSON",data:t,processData:!1,contentType:!1,beforeSend:function(){o.html(e("Processing...","info"))},success:function(a){a.auth?(o.html(e(a.message,"success")),location.href=a.url):($("input[name=csrf_test_name]").val(a.csrf),o.html(e(a.message,"error")))},fail:function(){console.log("Error")}})}),s.on("submit",function(a){a.preventDefault(),t=new FormData(this),$.ajax({url:s.attr("action"),type:s.attr("method"),dataType:"JSON",data:t,processData:!1,contentType:!1,beforeSend:function(){o.html(e("Processing...","info"))},success:function(a){a.auth?(o.html(e(a.message,"success")),location.href=a.url):($("input[name=csrf_test_name]").val(a.csrf),o.html(e(a.message,"error")))},fail:function(){console.log("Error")}})}),$("#sortDate").on("change",function(){var a=$(this).val();location.href=baseurl+"ads?sortdate="+a}),$("#sortPrice").on("change",function(){var a=$(this).val();location.href=baseurl+"ads?sortprice="+a}),$('div[data-action="category"]').on("click",function(){var a,t=$(this).data("id");a=t,$("#categoryModal").modal("toggle"),$.ajax({url:baseurl+"public/post-ad/handler/fetch_modal",type:"GET",dataType:"HTML",data:{categoryid:a},beforeSend:function(){$("#modalSpinner").html(i)},success:function(a){$("#modalSpinner").html(""),$("#mainCategories").html(""),$("#loadSubCategories").html(a)},fail:function(){console.log("Error")}}),$("#categoryModal").on("hidden.bs.modal",function(){$("#loadSubCategories").html("")})}),$('div[data-action="location"]').on("click",function(){var a,t=$(this).data("id");a=t,$("#locationModal").modal("toggle"),$.ajax({url:baseurl+"public/post-ad/handler/fetch_sub_location",type:"GET",dataType:"HTML",data:{locationid:a,categoryid:$("#categoryid").val()},beforeSend:function(){$("#modalSpinner").html(i)},success:function(a){$("#modalSpinner").html(""),$("#loadSubLocations").html(a)},fail:function(){console.log("Error")}}),$("#locationModal").on("hidden.bs.modal",function(){$("#loadSubLocations").html("")})});var c={category:function(a){a.preventDefault(),$("#categoryModal").modal("toggle")},location:function(a){a.preventDefault(),$("#locationModal").modal("toggle")}};$(document).on("click","button[data-action]",function(a){var t=$(this).data("action");"function"==typeof c[t]&&c[t].call(this,a)})}),$(function(){var t=new Array,e=$("#messageBox"),o=$("#adminLogin"),s=$("#rowCount").find(":selected").text(),n=$("#formAdReject"),r=(t=function(a,t){switch(t){case"error":return'<div class="notify-box"><noscript>Sorry, your browser does not support JavaScript!</noscript><div class="error d-flex align-items-center"><img src="'+baseurl+'assets/images/error.png" alt="Error-Image" class="img-fluid"><div>'+a+"<div></div></div>";case"success":return'<div class="notify-box"><noscript>Sorry, your browser does not support JavaScript!</noscript><div class="success d-flex align-items-center"><img src="'+baseurl+'assets/images/success.png" alt="Success-Image" class="img-fluid"><p>'+a+"</p></div></div>";case"info":return'<div class="notify-box"><noscript>Sorry, your browser does not support JavaScript!</noscript><div class="info d-flex align-items-center"><img src="'+baseurl+'assets/images/info.png" alt="Success-Image" class="img-fluid"><p>'+a+"</p></div></div>";default:return"Unable to display Message"}},function(a,t){$.ajax({url:baseurl+"admin/dashboard/ads/fetch-all",type:"GET",dataType:"html",data:{page:a,rows:t,sort:$("#sortAds").find(":selected").val()},beforeSend:function(){$("#allData").html('<i class="fa fa-spinner fa-spin fa-lg fa-fw d-block mx-auto text-primary mt-3"></i><span class="sr-only">Loading...</span>')},success:function(a){$("#allData").html(""),$("#allData").html(a)},fail:function(a,t,e){console.log(e)}})}),a=window.location.pathname.split("/");if(o.on("submit",function(a){a.preventDefault(),formData=new FormData(this),$.ajax({url:o.attr("action"),type:o.attr("method"),dataType:"JSON",data:formData,processData:!1,contentType:!1,beforeSend:function(){e.html(t("Processing...","info"))},success:function(a){a.auth?(e.html(t(a.message,"success")),location.href=a.url):e.html(t(a.message,"error"))},fail:function(){console.log("Error")}})}),"ads"==a[2]&&"all"==a[3]){r(1,s),$("#rowCount").on("change",function(){r(1,this.value)}),$("#sortAds").on("change",function(){r(1,s),$("#currentPage").text($("#sortAds").find(":selected").text())});var i={pagination:function(a){a.preventDefault();var t=$(this).data("ci-pagination-page");r(t,$(this).data("rows"))},reload:function(a){a.preventDefault(),$("#rowCount option").prop("selected",function(){return this.defaultSelected}),r(1,s)}};$(document).on("click","a[data-action]",function(a){var t=$(this).data("action");"function"==typeof i[t]&&i[t].call(this,a)})}"ads"==a[2]&&"view"==a[3]&&""!=a[4]&&($(".modal").on("click","#rComment",function(a){a.preventDefault(),function(){formData=new FormData;var a=n.serializeArray();$.each(a,function(a,t){formData.append(t.name,t.value)}),$.ajax({url:n.attr("action"),type:n.attr("method"),dataType:"JSON",data:formData,processData:!1,contentType:!1,beforeSend:function(){e.html(t("Processing...","info"))},success:function(a){a.auth?e.html(t(a.message,"success")):e.html(t(a.message,"error"))},fail:function(a,t,e){console.log(e)}})}()}),$(document).on("click","#approveBtn",function(a){var t;a.preventDefault(),t=$("#approveBtn").data("id"),$.ajax({url:baseurl+"admin/dashboard/ads/approve",type:"GET",dataType:"JSON",data:{id:t},beforeSend:function(){$("#approveBtn").html("Processing...")},success:function(a){a.auth?($("#approveBtn").html(""),$("#approveBtn").html(a.message),window.close()):($("#approveBtn").html(a.message),$("#approveBtn").addClass("btn-danger"),alert(a.message))},fail:function(a,t,e){console.log(e)}})}))});